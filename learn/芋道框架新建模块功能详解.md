# èŠ‹é“æ¡†æ¶æ–°å»ºæ¨¡å—åŠŸèƒ½è¯¦è§£

## ğŸ¯ æ¦‚è¿°

èŠ‹é“æ¡†æ¶é‡‡ç”¨æ¨¡å—åŒ–æ¶æ„è®¾è®¡ï¼Œæ”¯æŒçµæ´»çš„æ¨¡å—æ‰©å±•ã€‚`yudao-module-demo` æ˜¯ä¸€ä¸ªå®éªŒæ€§ç¤ºä¾‹æ¨¡å—ï¼Œä¸“é—¨ç”¨äºæµ‹è¯•å’Œæ¼”ç¤ºå¦‚ä½•åœ¨èŠ‹é“æ¡†æ¶ä¸­æ–°å»ºè‡ªå®šä¹‰æ¨¡å—å’Œ APIï¼ŒåŒ…æ‹¬å¦‚ä½•åˆ›å»ºè‡ªå®šä¹‰ API å‰ç¼€ã€‚

## ğŸ“š ç›®å½•ç»“æ„

1. [æ¨¡å—åŒ–æ¶æ„è®¾è®¡](#æ¨¡å—åŒ–æ¶æ„è®¾è®¡)
2. [Demo æ¨¡å—åˆ†æ](#demo-æ¨¡å—åˆ†æ)
3. [æ–°å»ºæ¨¡å—æ­¥éª¤](#æ–°å»ºæ¨¡å—æ­¥éª¤)
4. [API ç±»å‹è¯¦è§£](#api-ç±»å‹è¯¦è§£)
5. [æ¨¡å—é›†æˆé…ç½®](#æ¨¡å—é›†æˆé…ç½®)
6. [æœ€ä½³å®è·µ](#æœ€ä½³å®è·µ)

---

## ğŸ—ï¸ æ¨¡å—åŒ–æ¶æ„è®¾è®¡

### æ¶æ„æ¦‚è§ˆ

```
yudao-vue-pro/
â”œâ”€â”€ yudao-dependencies/          # ä¾èµ–ç®¡ç†
â”œâ”€â”€ yudao-framework/             # æ¡†æ¶æ ¸å¿ƒ
â”œâ”€â”€ yudao-server/               # ä¸»æœåŠ¡ï¼ˆå®¹å™¨ï¼‰
â”œâ”€â”€ yudao-module-system/        # ç³»ç»Ÿç®¡ç†æ¨¡å—
â”œâ”€â”€ yudao-module-infra/         # åŸºç¡€è®¾æ–½æ¨¡å—
â”œâ”€â”€ yudao-module-demo/          # ç¤ºä¾‹æ¨¡å— â­â­â­
â”œâ”€â”€ yudao-module-bpm/           # å·¥ä½œæµæ¨¡å—ï¼ˆå¯é€‰ï¼‰
â”œâ”€â”€ yudao-module-pay/           # æ”¯ä»˜æ¨¡å—ï¼ˆå¯é€‰ï¼‰
â”œâ”€â”€ yudao-module-mall/          # å•†åŸæ¨¡å—ï¼ˆå¯é€‰ï¼‰
â””â”€â”€ yudao-module-xxx/           # è‡ªå®šä¹‰æ¨¡å—
```

### è®¾è®¡åŸåˆ™

1. **æ¨¡å—ç‹¬ç«‹æ€§**ï¼šæ¯ä¸ªæ¨¡å—éƒ½æ˜¯ç‹¬ç«‹çš„ Maven é¡¹ç›®
2. **æŒ‰éœ€åŠ è½½**ï¼šå¯ä»¥é€‰æ‹©æ€§åœ°å¯ç”¨æˆ–ç¦ç”¨æ¨¡å—
3. **ç»Ÿä¸€è§„èŒƒ**ï¼šæ‰€æœ‰æ¨¡å—éµå¾ªç›¸åŒçš„ç›®å½•ç»“æ„å’Œå‘½åè§„èŒƒ
4. **æ¾è€¦åˆ**ï¼šæ¨¡å—é—´é€šè¿‡ API æ¥å£è¿›è¡Œé€šä¿¡

---

## ğŸ“¦ Demo æ¨¡å—åˆ†æ

### æ¨¡å—ç»“æ„

```
yudao-module-demo/
â”œâ”€â”€ pom.xml                     # Maven é…ç½®æ–‡ä»¶
â””â”€â”€ src/main/java/cn/iocoder/yudao/module/demo/
    â”œâ”€â”€ controller/             # æ§åˆ¶å™¨å±‚
    â”‚   â”œâ”€â”€ admin/             # åå°ç®¡ç† API
    â”‚   â”‚   â””â”€â”€ DemoTestController.java
    â”‚   â”œâ”€â”€ app/               # ç”¨æˆ·ç«¯ API
    â”‚   â”‚   â””â”€â”€ AppDemoTestController.java
    â”‚   â””â”€â”€ open/              # å¼€æ”¾ API
    â”‚       â””â”€â”€ DemoOpenTestController.java
    â”œâ”€â”€ service/               # æœåŠ¡å±‚ï¼ˆç©ºï¼‰
    â””â”€â”€ dal/                   # æ•°æ®è®¿é—®å±‚ï¼ˆç©ºï¼‰
```

![image-20250818161304781](D:\code\ruoyi-vue-pro\learn\èŠ‹é“æ¡†æ¶æ–°å»ºæ¨¡å—åŠŸèƒ½è¯¦è§£.assets\image-20250818161304781.png)

### ä¸‰ç§ API ç±»å‹

#### 1. åå°ç®¡ç† API (Admin)

```java
@Tag(name="åå°ç®¡ç† -Test")
@RestController
@RequestMapping("/demo/test")
@Validated
public class DemoTestController {

    public DemoTestController(){
        System.out.println(getClass()+"ç”Ÿæ•ˆæˆåŠŸ");
    }

    @GetMapping("/get")
    @Operation(summary = "è·å– test ä¿¡æ¯")
    public CommonResult<String> get() {
        return success("true");
    }
}
```

**ç‰¹ç‚¹ï¼š**
- è·¯å¾„å‰ç¼€ï¼š`/admin-api/demo/test`
- ç”¨é€”ï¼šåå°ç®¡ç†ç³»ç»Ÿä½¿ç”¨
- æƒé™ï¼šéœ€è¦ç®¡ç†å‘˜æƒé™
- æ–‡æ¡£ï¼šSwagger åˆ†ç»„ä¸º"åå°ç®¡ç†"

#### 2. ç”¨æˆ·ç«¯ API (App)

```java
@Tag(name = "ç”¨æˆ· App - Test")
@RestController
@RequestMapping("/demo/test")
@Validated
public class AppDemoTestController {

    public AppDemoTestController() {
        System.out.println(getClass() + "ç”Ÿæ•ˆå•¦ï¼ï¼ï¼");
    }

    @GetMapping("/get")
    @Operation(summary = "è·å– test ä¿¡æ¯")
    public CommonResult<String> get() {
        return success("true");
    }
}
```

**ç‰¹ç‚¹ï¼š**
- è·¯å¾„å‰ç¼€ï¼š`/app-api/demo/test`
- ç”¨é€”ï¼šç§»åŠ¨ç«¯æˆ–ç”¨æˆ·ç«¯ä½¿ç”¨
- æƒé™ï¼šéœ€è¦ç”¨æˆ·ç™»å½•
- æ–‡æ¡£ï¼šSwagger åˆ†ç»„ä¸º"ç”¨æˆ· App"

#### 3. è‡ªå®šä¹‰ API å‰ç¼€ (Open)

```java
@Tag(name = "æ–°å»ºOpenapiæ¨¡å— - Test")
@RestController
@RequestMapping("/demo/test")
@Validated
public class DemoOpenTestController {

    public DemoOpenTestController() {
        System.out.println(getClass() + "ç”Ÿæ•ˆå•¦ï¼ï¼ï¼");
    }

    @GetMapping("/get")
    @Operation(summary = "è·å– test ä¿¡æ¯")
    public CommonResult<String> get() {
        return success("true");
    }
}
```

**ç‰¹ç‚¹ï¼š**
- è·¯å¾„å‰ç¼€ï¼š`/open-api/demo/test`ï¼ˆè‡ªå®šä¹‰ API å‰ç¼€ç¤ºä¾‹ï¼‰
- ç”¨é€”ï¼šæ¼”ç¤ºå¦‚ä½•åˆ›å»ºè‡ªå®šä¹‰ API å‰ç¼€
- æƒé™ï¼šå¯æ ¹æ®éœ€è¦è‡ªå®šä¹‰æƒé™æ§åˆ¶
- æ–‡æ¡£ï¼šSwagger åˆ†ç»„ä¸º"è‡ªå®šä¹‰ API"

> **è¯´æ˜**ï¼šè¿™ä¸ª Open API æ˜¯å‚è€ƒå®˜æ–¹æ–‡æ¡£åˆ›å»ºçš„è‡ªå®šä¹‰ API å‰ç¼€ç¤ºä¾‹ï¼Œç”¨äºæ¼”ç¤ºå¦‚ä½•æ‰©å±•èŠ‹é“æ¡†æ¶çš„ API ç±»å‹ã€‚

---

## ğŸ”§ æ–°å»ºæ¨¡å—æ­¥éª¤

### æ­¥éª¤ 1ï¼šåˆ›å»º Maven æ¨¡å—

#### 1.1 åˆ›å»ºæ¨¡å—ç›®å½•

```bash
# åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹åˆ›å»ºæ–°æ¨¡å—
mkdir yudao-module-yourmodule
cd yudao-module-yourmodule
```

#### 1.2 åˆ›å»º pom.xml

```xml
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 
         http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <parent>
        <groupId>cn.iocoder.boot</groupId>
        <artifactId>yudao</artifactId>
        <version>${revision}</version>
    </parent>
    <modelVersion>4.0.0</modelVersion>

    <artifactId>yudao-module-yourmodule</artifactId>
    <packaging>jar</packaging>

    <name>${project.artifactId}</name>
    <description>ä½ çš„æ¨¡å—æè¿°</description>

    <dependencies>
        <!-- åŸºç¡€ä¾èµ– -->
        <dependency>
            <groupId>cn.iocoder.boot</groupId>
            <artifactId>yudao-spring-boot-starter-web</artifactId>
        </dependency>
        
        <!-- æ•°æ®åº“ä¾èµ–ï¼ˆå¦‚æœéœ€è¦ï¼‰ -->
        <dependency>
            <groupId>cn.iocoder.boot</groupId>
            <artifactId>yudao-spring-boot-starter-mybatis</artifactId>
        </dependency>
        
        <!-- å…¶ä»–ä¾èµ–... -->
    </dependencies>
</project>
```

### æ­¥éª¤ 2ï¼šåˆ›å»ºç›®å½•ç»“æ„

```bash
# åˆ›å»ºæ ‡å‡†ç›®å½•ç»“æ„
mkdir -p src/main/java/cn/iocoder/yudao/module/yourmodule/controller/admin
mkdir -p src/main/java/cn/iocoder/yudao/module/yourmodule/controller/app
mkdir -p src/main/java/cn/iocoder/yudao/module/yourmodule/controller/open
mkdir -p src/main/java/cn/iocoder/yudao/module/yourmodule/service
mkdir -p src/main/java/cn/iocoder/yudao/module/yourmodule/dal/dataobject
mkdir -p src/main/java/cn/iocoder/yudao/module/yourmodule/dal/mysql
mkdir -p src/main/resources
```

### æ­¥éª¤ 3ï¼šåˆ›å»ºæ§åˆ¶å™¨

#### 3.1 åå°ç®¡ç†æ§åˆ¶å™¨

```java
package cn.iocoder.yudao.module.yourmodule.controller.admin;

import cn.iocoder.yudao.framework.common.pojo.CommonResult;
import io.swagger.v3.oas.annotations.Operation;
import io.swagger.v3.oas.annotations.tags.Tag;
import org.springframework.validation.annotation.Validated;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RestController;

import static cn.iocoder.yudao.framework.common.pojo.CommonResult.success;

@Tag(name = "åå°ç®¡ç† - ä½ çš„æ¨¡å—")
@RestController
@RequestMapping("/yourmodule/test")
@Validated
public class YourModuleController {

    @GetMapping("/get")
    @Operation(summary = "è·å–æµ‹è¯•ä¿¡æ¯")
    public CommonResult<String> get() {
        return success("ä½ çš„æ¨¡å—è¿è¡Œæ­£å¸¸");
    }
}
```

### æ­¥éª¤ 4ï¼šæ³¨å†Œæ¨¡å—

#### 4.1 åœ¨æ ¹ pom.xml ä¸­æ·»åŠ æ¨¡å—

```xml
<modules>
    <module>yudao-dependencies</module>
    <module>yudao-framework</module>
    <module>yudao-server</module>
    <module>yudao-module-system</module>
    <module>yudao-module-infra</module>
    <module>yudao-module-demo</module>
    <module>yudao-module-yourmodule</module>  <!-- æ·»åŠ è¿™è¡Œ -->
</modules>
```

#### 4.2 åœ¨ yudao-server/pom.xml ä¸­æ·»åŠ ä¾èµ–

```xml
<dependencies>
    <!-- ç°æœ‰ä¾èµ–... -->
    
    <!-- ä½ çš„æ¨¡å— -->
    <dependency>
        <groupId>cn.iocoder.boot</groupId>
        <artifactId>yudao-module-yourmodule</artifactId>
        <version>${revision}</version>
    </dependency>
</dependencies>
```

### æ­¥éª¤ 5ï¼šæµ‹è¯•æ¨¡å—

#### 5.1 å¯åŠ¨é¡¹ç›®

```bash
# ç¼–è¯‘é¡¹ç›®
mvn clean compile

# å¯åŠ¨é¡¹ç›®
mvn spring-boot:run -pl yudao-server
```

#### 5.2 è®¿é—® API

```bash
# swggerå‰ç«¯é¡µé¢åœ°å€
http://127.0.0.1:48080/doc.html

# åå°ç®¡ç† API
curl http://localhost:8080/admin-api/yourmodule/test/get

# ç”¨æˆ·ç«¯ API
curl http://localhost:8080/app-api/yourmodule/test/get

# è‡ªå®šä¹‰ APIï¼ˆä»¥ open-api ä¸ºä¾‹ï¼‰
curl http://localhost:8080/open-api/yourmodule/test/get
```

#### 5.3 æŸ¥çœ‹ Swagger æ–‡æ¡£

- åå°ç®¡ç†ï¼šhttp://localhost:8080/admin-api/doc.html
- ç”¨æˆ·ç«¯ï¼šhttp://localhost:8080/app-api/doc.html
- è‡ªå®šä¹‰ APIï¼šhttp://localhost:8080/open-api/doc.htmlï¼ˆä»¥ open-api ä¸ºä¾‹ï¼‰

---

![image-20250818161356397](D:\code\ruoyi-vue-pro\learn\èŠ‹é“æ¡†æ¶æ–°å»ºæ¨¡å—åŠŸèƒ½è¯¦è§£.assets\image-20250818161356397.png)

![image-20250818161431693](D:\code\ruoyi-vue-pro\learn\èŠ‹é“æ¡†æ¶æ–°å»ºæ¨¡å—åŠŸèƒ½è¯¦è§£.assets\image-20250818161431693.png)

## ğŸ”§ è‡ªå®šä¹‰ API å‰ç¼€è¯¦è§£

### ä»€ä¹ˆæ˜¯è‡ªå®šä¹‰ API å‰ç¼€ï¼Ÿ

èŠ‹é“æ¡†æ¶é»˜è®¤æä¾›äº†ä¸¤ç§ API å‰ç¼€ï¼š
- `/admin-api`ï¼šåå°ç®¡ç† API
- `/app-api`ï¼šç”¨æˆ·ç«¯ API

ä½†åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œä½ å¯èƒ½éœ€è¦åˆ›å»ºå…¶ä»–ç±»å‹çš„ APIï¼Œæ¯”å¦‚ï¼š
- `/open-api`ï¼šå¼€æ”¾ APIï¼ˆç¬¬ä¸‰æ–¹è°ƒç”¨ï¼‰
- `/partner-api`ï¼šåˆä½œä¼™ä¼´ API
- `/internal-api`ï¼šå†…éƒ¨ç³»ç»Ÿ API
- `/webhook-api`ï¼šå›è°ƒ API

### å¦‚ä½•åˆ›å»ºè‡ªå®šä¹‰ API å‰ç¼€ï¼Ÿ

#### æ­¥éª¤ 1ï¼šåœ¨WebPropertiesä¸­æ–°å¢å‰ç¼€é…ç½®

```java
public class WebProperties {

    @NotNull(message = "APP API ä¸èƒ½ä¸ºç©º")
    private Api appApi = new Api("/app-api", "**.controller.app.**");
    @NotNull(message = "Admin API ä¸èƒ½ä¸ºç©º")
    private Api adminApi = new Api("/admin-api", "**.controller.admin.**");
//    è¿™é‡Œå¯ä»¥æ·»åŠ æ–°çš„apiå‰ç¼€ æ¯”å¦‚ open
    @NotNull
    private Api openApi = new Api("/open-api", "**.controller.open.**");
}
```

#### æ­¥éª¤ 2ï¼šYudaoWebAutoConfigurationé…ç½®æ·»åŠ å‰ç¼€é…ç½®

```java
public class YudaoWebAutoConfiguration implements WebMvcConfigurer {

    @Resource
    private WebProperties webProperties;
    /**
     * åº”ç”¨å
     */
    @Value("${spring.application.name}")
    private String applicationName;

    @Override
    public void configurePathMatch(PathMatchConfigurer configurer) {
        configurePathMatch(configurer, webProperties.getAdminApi());
        configurePathMatch(configurer, webProperties.getAppApi());
//        æ·»åŠ open çš„api
        configurePathMatch(configurer,webProperties.getOpenApi());
    }
```

#### æ­¥éª¤3ï¼šYudaoSwaggerAutoConfigurationæ·»åŠ APIåˆ†ç»„é…ç½®

```
public static GroupedOpenApi buildGroupedOpenApi(String group, String path) {
        return GroupedOpenApi.builder()
                .group(group)
                .pathsToMatch("/admin-api/" + path + "/**", "/app-api/" + path + "/**" ,"/open-api/" + path + "/**")
                .addOperationCustomizer((operation, handlerMethod) -> operation
                        .addParametersItem(buildTenantHeaderParameter())
                        .addParametersItem(buildSecurityHeaderParameter()))
                .build();
    }
```



#### æ­¥éª¤ 4ï¼šApiRequestFilterè¿‡æ»¤å™¨é…ç½®

```java
@RequiredArgsConstructor
public abstract class ApiRequestFilter extends OncePerRequestFilter {

    protected final WebProperties webProperties;

    @Override
    protected boolean shouldNotFilter(HttpServletRequest request) {
        // åªè¿‡æ»¤ API è¯·æ±‚çš„åœ°å€
        String apiUri = request.getRequestURI().substring(request.getContextPath().length());
        return !StrUtil.startWithAny(apiUri, webProperties.getAdminApi().getPrefix(), webProperties.getAppApi().getPrefix(),webProperties.getOpenApi().getPrefix());
    }
```

### Demo æ¨¡å—ä¸­çš„å®ç°

åœ¨ `yudao-module-demo` ä¸­ï¼Œ`DemoOpenTestController` å°±æ˜¯æŒ‰ç…§ä¸Šè¿°æ–¹å¼åˆ›å»ºçš„è‡ªå®šä¹‰ API å‰ç¼€ç¤ºä¾‹ï¼š

```java
@Tag(name = "æ–°å»ºOpenapiæ¨¡å— - Test")
@RestController
@RequestMapping("/demo/test")
@Validated
public class DemoOpenTestController {
    // å®é™…è®¿é—®è·¯å¾„ï¼š/open-api/demo/test/get
}
```

---

å¦‚æœæ˜¯æ–°çš„è¯ï¼Œå°±åœ¨controllerä¸‹é¢æ–°å»ºä¸é…ç½®ä¸­å¯¹åº”çš„åŒ…ï¼ˆ**.controller.open.**ï¼‰ï¼Œç„¶åå†™APIå°±å¯ä»¥äº†

## ğŸ¨ API ç±»å‹è¯¦è§£

### API è·¯å¾„è§„åˆ™

| API ç±»å‹ | è·¯å¾„å‰ç¼€ | åŒ…è·¯å¾„ | ç”¨é€” | æƒé™è¦æ±‚ |
|---------|---------|--------|------|---------|
| Admin API | `/admin-api` | `controller.admin` | åå°ç®¡ç† | ç®¡ç†å‘˜æƒé™ |
| App API | `/app-api` | `controller.app` | ç”¨æˆ·ç«¯ | ç”¨æˆ·ç™»å½• |
| è‡ªå®šä¹‰ API | `/open-api` | `controller.open` | è‡ªå®šä¹‰å‰ç¼€ç¤ºä¾‹ | å¯è‡ªå®šä¹‰ |

> **æ³¨æ„**ï¼š`/open-api` åœ¨æ­¤ Demo ä¸­æ˜¯è‡ªå®šä¹‰ API å‰ç¼€çš„ç¤ºä¾‹ï¼Œå®é™…é¡¹ç›®ä¸­å¯ä»¥æ ¹æ®éœ€è¦åˆ›å»ºä»»æ„å‰ç¼€ã€‚

### æƒé™é…ç½®

#### Admin API æƒé™

```java
@PreAuthorize("@ss.hasPermission('yourmodule:data:query')")
@GetMapping("/list")
public CommonResult<List<YourDataRespVO>> getDataList() {
    // éœ€è¦ç‰¹å®šæƒé™æ‰èƒ½è®¿é—®
}
```

#### App API æƒé™

```java
@GetMapping("/profile")
public CommonResult<UserProfileRespVO> getUserProfile() {
    // éœ€è¦ç”¨æˆ·ç™»å½•ï¼Œè‡ªåŠ¨è·å–å½“å‰ç”¨æˆ·ä¿¡æ¯
    Long userId = SecurityFrameworkUtils.getLoginUserId();
    // ...
}
```

#### è‡ªå®šä¹‰ API æƒé™

```java
@GetMapping("/custom-data")
public CommonResult<CustomDataRespVO> getCustomData() {
    // å¯ä»¥æ ¹æ®éœ€è¦è‡ªå®šä¹‰æƒé™æ§åˆ¶
    // ä¾‹å¦‚ï¼šAPI Key éªŒè¯ã€ç‰¹å®šè§’è‰²éªŒè¯ç­‰
    return success(data);
}
```

### Swagger æ–‡æ¡£é…ç½®

#### åˆ†ç»„é…ç½®

```java
// Admin API
@Tag(name = "åå°ç®¡ç† - ä½ çš„æ¨¡å—")

// App API  
@Tag(name = "ç”¨æˆ· App - ä½ çš„æ¨¡å—")

// è‡ªå®šä¹‰ API
@Tag(name = "è‡ªå®šä¹‰æ¥å£ - ä½ çš„æ¨¡å—")
```

#### æ¥å£æ–‡æ¡£

```java
@Operation(summary = "åˆ›å»ºæ•°æ®", description = "åˆ›å»ºä¸€æ¡æ–°çš„æ•°æ®è®°å½•")
@Parameter(name = "id", description = "æ•°æ®ID", required = true, example = "1")
public CommonResult<Long> createData(@Valid @RequestBody DataCreateReqVO createReqVO) {
    // ...
}
```

---

## âš™ï¸ æ¨¡å—é›†æˆé…ç½®

### ä¾èµ–ç®¡ç†

#### åŸºç¡€ä¾èµ–

```xml
<!-- Web ç›¸å…³ -->
<dependency>
    <groupId>cn.iocoder.boot</groupId>
    <artifactId>yudao-spring-boot-starter-web</artifactId>
</dependency>

<!-- æ•°æ®åº“ç›¸å…³ -->
<dependency>
    <groupId>cn.iocoder.boot</groupId>
    <artifactId>yudao-spring-boot-starter-mybatis</artifactId>
</dependency>

<!-- å®‰å…¨ç›¸å…³ -->
<dependency>
    <groupId>cn.iocoder.boot</groupId>
    <artifactId>yudao-spring-boot-starter-security</artifactId>
</dependency>
```

#### å¯é€‰ä¾èµ–

```xml
<!-- Redis ç¼“å­˜ -->
<dependency>
    <groupId>cn.iocoder.boot</groupId>
    <artifactId>yudao-spring-boot-starter-redis</artifactId>
</dependency>

<!-- æ¶ˆæ¯é˜Ÿåˆ— -->
<dependency>
    <groupId>cn.iocoder.boot</groupId>
    <artifactId>yudao-spring-boot-starter-mq</artifactId>
</dependency>

<!-- æ–‡ä»¶å­˜å‚¨ -->
<dependency>
    <groupId>cn.iocoder.boot</groupId>
    <artifactId>yudao-spring-boot-starter-file</artifactId>
</dependency>
```

### é…ç½®æ–‡ä»¶

#### application.yml

```yaml
# æ¨¡å—ç‰¹å®šé…ç½®
yudao:
  yourmodule:
    enabled: true
    config-value: "your-config"
```

#### æ•°æ®åº“é…ç½®

```sql
-- åˆ›å»ºæ¨¡å—ç›¸å…³è¡¨
CREATE TABLE `your_module_data` (
  `id` bigint NOT NULL AUTO_INCREMENT COMMENT 'ID',
  `name` varchar(100) NOT NULL COMMENT 'åç§°',
  `status` tinyint NOT NULL DEFAULT '1' COMMENT 'çŠ¶æ€',
  `create_time` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT 'åˆ›å»ºæ—¶é—´',
  `update_time` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT 'æ›´æ–°æ—¶é—´',
  `deleted` bit(1) NOT NULL DEFAULT b'0' COMMENT 'æ˜¯å¦åˆ é™¤',
  `tenant_id` bigint NOT NULL DEFAULT '0' COMMENT 'ç§Ÿæˆ·ç¼–å·',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB COMMENT='ä½ çš„æ¨¡å—æ•°æ®è¡¨';
```

---

## ğŸ’¡ æœ€ä½³å®è·µ

### 1. å‘½åè§„èŒƒ

#### åŒ…å‘½å

```
cn.iocoder.yudao.module.{æ¨¡å—å}.{å±‚çº§}
```

#### ç±»å‘½å

```java
// Controller
{æ¨¡å—å}Controller.java
App{æ¨¡å—å}Controller.java
{æ¨¡å—å}OpenController.java

// Service
{æ¨¡å—å}Service.java
{æ¨¡å—å}ServiceImpl.java

// DO/VO
{æ¨¡å—å}DO.java
{æ¨¡å—å}RespVO.java
{æ¨¡å—å}SaveReqVO.java
```

### 2. æ¨¡å—è®¾è®¡åŸåˆ™

#### å•ä¸€èŒè´£

```java
// âœ… å¥½çš„è®¾è®¡ï¼šæ¯ä¸ªæ¨¡å—ä¸“æ³¨ä¸€ä¸ªä¸šåŠ¡é¢†åŸŸ
yudao-module-user     // ç”¨æˆ·ç®¡ç†
yudao-module-order    // è®¢å•ç®¡ç†
yudao-module-product  // å•†å“ç®¡ç†

// âŒ ä¸å¥½çš„è®¾è®¡ï¼šæ¨¡å—èŒè´£ä¸æ¸…
yudao-module-business // å¤ªå®½æ³›
```

#### æ¥å£éš”ç¦»

```java
// âœ… æŒ‰ä½¿ç”¨åœºæ™¯åˆ†ç¦»æ¥å£
@RestController
@RequestMapping("/admin/user")  // ç®¡ç†å‘˜ç”¨æˆ·ç®¡ç†
class AdminUserController {}

@RestController  
@RequestMapping("/app/user")    // ç”¨æˆ·è‡ªå·±çš„ä¿¡æ¯ç®¡ç†
class AppUserController {}
```

### 3. å®‰å…¨è€ƒè™‘

#### æƒé™æ§åˆ¶

```java
// Admin API - ç»†ç²’åº¦æƒé™
@PreAuthorize("@ss.hasPermission('system:user:create')")
public CommonResult<Long> createUser() {}

// App API - ç”¨æˆ·èº«ä»½éªŒè¯
public CommonResult<UserInfoRespVO> getUserInfo() {
    Long userId = SecurityFrameworkUtils.getLoginUserId();
    // åªèƒ½è®¿é—®è‡ªå·±çš„ä¿¡æ¯
}

// Open API - é™æµå’Œç­¾åéªŒè¯
@RateLimiter(name = "openapi", fallbackMethod = "fallback")
public CommonResult<String> openApiMethod() {}
```

#### æ•°æ®éš”ç¦»

```java
// å¤šç§Ÿæˆ·æ•°æ®éš”ç¦»
@TenantIgnore  // å¿½ç•¥ç§Ÿæˆ·éš”ç¦»çš„è¡¨
public class GlobalConfigDO {}

// è‡ªåŠ¨åº”ç”¨ç§Ÿæˆ·éš”ç¦»
public class UserDataDO extends BaseDO {}
```

### 4. æ€§èƒ½ä¼˜åŒ–

#### ç¼“å­˜ä½¿ç”¨

```java
@Cacheable(value = "yourmodule:data", key = "#id")
public YourDataDO getData(Long id) {
    return dataMapper.selectById(id);
}
```

#### å¼‚æ­¥å¤„ç†

```java
@Async
public void processDataAsync(Long dataId) {
    // å¼‚æ­¥å¤„ç†è€—æ—¶æ“ä½œ
}
```

### 5. ç›‘æ§å’Œæ—¥å¿—

#### æ“ä½œæ—¥å¿—

```java
@OperateLog(type = EXPORT)
@GetMapping("/export")
public void exportData() {
    // è‡ªåŠ¨è®°å½•å¯¼å‡ºæ“ä½œ
}
```

#### ä¸šåŠ¡ç›‘æ§

```java
@Component
public class YourModuleMetrics {
    
    @EventListener
    public void handleDataCreated(DataCreatedEvent event) {
        // è®°å½•ä¸šåŠ¡æŒ‡æ ‡
        meterRegistry.counter("yourmodule.data.created").increment();
    }
}
```

## ğŸ‰ æ€»ç»“

é€šè¿‡ `yudao-module-demo` å®éªŒæ€§ç¤ºä¾‹æ¨¡å—ï¼Œæˆ‘ä»¬å­¦ä¹ äº†ï¼š

### âœ… æ ¸å¿ƒçŸ¥è¯†ç‚¹

1. **æ¨¡å—åŒ–æ¶æ„**ï¼šç‹¬ç«‹çš„ Maven æ¨¡å—ï¼ŒæŒ‰éœ€åŠ è½½
2. **API ç±»å‹æ‰©å±•**ï¼šAdminã€App åŸºç¡€ç±»å‹ + è‡ªå®šä¹‰ API å‰ç¼€
3. **æ ‡å‡†ç›®å½•ç»“æ„**ï¼šcontrollerã€serviceã€dal åˆ†å±‚è®¾è®¡
4. **é›†æˆé…ç½®**ï¼špom.xml ä¾èµ–ç®¡ç†å’Œæ¨¡å—æ³¨å†Œ

### ğŸš€ å®è·µèƒ½åŠ›

1. **åˆ›å»ºæ–°æ¨¡å—**ï¼šä»é›¶å¼€å§‹åˆ›å»ºè‡ªå®šä¹‰ä¸šåŠ¡æ¨¡å—
2. **è®¾è®¡ API**ï¼šæ ¹æ®ä½¿ç”¨åœºæ™¯é€‰æ‹©åˆé€‚çš„ API ç±»å‹
3. **è‡ªå®šä¹‰å‰ç¼€**ï¼šåˆ›å»ºç¬¦åˆä¸šåŠ¡éœ€æ±‚çš„ API å‰ç¼€
4. **æƒé™æ§åˆ¶**ï¼šå®ç°ç»†ç²’åº¦çš„æƒé™ç®¡ç†
5. **æ–‡æ¡£ç”Ÿæˆ**ï¼šè‡ªåŠ¨ç”Ÿæˆ Swagger API æ–‡æ¡£

### ğŸ’¡ è®¾è®¡æ€æƒ³

1. **æ¨¡å—ç‹¬ç«‹**ï¼šæ¯ä¸ªæ¨¡å—éƒ½æ˜¯ç‹¬ç«‹å¯éƒ¨ç½²çš„å•å…ƒ
2. **èŒè´£åˆ†ç¦»**ï¼šä¸åŒç±»å‹çš„ API æ‰¿æ‹…ä¸åŒèŒè´£
3. **çµæ´»æ‰©å±•**ï¼šæ”¯æŒè‡ªå®šä¹‰ API å‰ç¼€ï¼Œæ»¡è¶³å¤šæ ·åŒ–éœ€æ±‚
4. **ç»Ÿä¸€è§„èŒƒ**ï¼šéµå¾ªæ¡†æ¶çš„å‘½åå’Œç»“æ„è§„èŒƒ
5. **å®éªŒé©±åŠ¨**ï¼šé€šè¿‡ Demo æ¨¡å—éªŒè¯æ–°åŠŸèƒ½å’Œè®¾è®¡

### ğŸ§ª Demo æ¨¡å—çš„ä»·å€¼

`yudao-module-demo` ä½œä¸ºå®éªŒæ€§æ¨¡å—ï¼Œå±•ç¤ºäº†ï¼š

1. **å¦‚ä½•åˆ›å»ºæ–°æ¨¡å—**ï¼šå®Œæ•´çš„åˆ›å»ºæµç¨‹å’Œé…ç½®
2. **å¦‚ä½•æ‰©å±• API ç±»å‹**ï¼šè‡ªå®šä¹‰ API å‰ç¼€çš„å®ç°æ–¹å¼
3. **å¦‚ä½•éªŒè¯åŠŸèƒ½**ï¼šé€šè¿‡ç®€å•çš„æµ‹è¯•æ¥å£éªŒè¯æ¨¡å—æ˜¯å¦æ­£å¸¸å·¥ä½œ
4. **å¦‚ä½•éµå¾ªè§„èŒƒ**ï¼šæ ‡å‡†çš„ç›®å½•ç»“æ„å’Œå‘½åè§„èŒƒ

ç°åœ¨ä½ å·²ç»æŒæ¡äº†èŠ‹é“æ¡†æ¶çš„æ¨¡å—åŒ–å¼€å‘æ–¹å¼ï¼Œå¯ä»¥æ ¹æ®ä¸šåŠ¡éœ€æ±‚åˆ›å»ºè‡ªå·±çš„æ¨¡å—ï¼Œç”šè‡³æ‰©å±•å‡ºæ–°çš„ API ç±»å‹ï¼ğŸ¯
