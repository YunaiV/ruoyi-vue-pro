# MySQL脚本与代码实体差异报告

## 差异总结

| 表名 | 问题类型 | 描述 | 严重程度 |
|------|---------|------|---------|
| mp_account | 多余字段 | 脚本中有`url`字段，但代码中无此字段 | 高 |
| mp_menu | 字段类型错误 | `parent_id`类型为varchar(32)，应为bigint | 高 |
| mp_tag | 注释不一致 | `count`字段注释"粉丝数量"应改为"此标签下粉丝数" | 低 |
| mp_account | 注释不一致 | `aes_key`注释"加密密钥"应改为"消息加解密密钥" | 低 |

## 详细差异分析

### 1. mp_account表

**问题**: 多余字段`url`
- **脚本**: 第30行有`url` varchar(100) COMMENT '公众号url'
- **代码**: MpAccountDO中没有url字段
- **修复**: 删除`url`字段

**问题**: 注释不准确
- **脚本**: `aes_key` varchar(300) COMMENT '加密密钥'
- **代码**: 注释为"消息加解密密钥"
- **修复**: 更新注释为"消息加解密密钥"

### 2. mp_menu表

**问题**: `parent_id`字段类型错误
- **脚本**: `parent_id` varchar(32) COMMENT '父ID'
- **代码**: private Long parentId; 应映射为bigint
- **修复**: 更改类型为bigint

**问题**: `account_id`注释不一致
- **脚本**: COMMENT '微信公众号ID'
- **代码**: 注释为"公众号账号的编号"
- **修复**: 统一为"公众号账号的编号"

### 3. mp_tag表

**问题**: `count`字段注释不完整
- **脚本**: COMMENT '粉丝数量'
- **代码**: 注释为"此标签下粉丝数"
- **修复**: 更新为"此标签下粉丝数"

### 4. mp_user表

**问题**: `account_id`注释不一致
- **脚本**: COMMENT '微信公众号ID'
- **代码**: 注释为"公众号账号的编号"
- **修复**: 统一为"公众号账号的编号"

### 5. mp_message表

**问题**: `msg_id`注释不一致
- **脚本**: COMMENT '微信公众号的消息编号'
- **代码**: 注释为"微信公众号消息id"
- **修复**: 统一为"微信公众号消息id"

### 6. mp_auto_reply、mp_material表

✅ 这两个表的字段定义与代码实体完全一致，无需修复。

## 修复建议

建议按照以下优先级修复：

**高优先级**（影响数据类型和结构）:
1. 删除mp_account表的url字段
2. 修复mp_menu表的parent_id字段类型为bigint

**低优先级**（仅影响注释）:
3. 统一所有注释与代码保持一致

## 验证方法

修复后，对比脚本与实体类字段定义：
```bash
# 逐表检查字段数量、类型、注释是否一致
```
