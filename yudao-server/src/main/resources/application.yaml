spring:
  application:
    name: yudao-server

  profiles:
    active: local

  main:
    allow-circular-references: true # å…è®¸å¾ªç¯ä¾èµ–ï¼Œå› ä¸ºé¡¹ç›®æ˜¯ä¸‰å±‚æ¶æ„ï¼Œæ— æ³•é¿å…è¿™ä¸ªæƒ…å†µã€‚

  # Servlet é…ç½®
  servlet:
    # æ–‡ä»¶ä¸Šä¼ ç›¸å…³é…ç½®é¡¹
    multipart:
      max-file-size: 16MB # å•ä¸ªæ–‡ä»¶å¤§å°
      max-request-size: 32MB # è®¾ç½®æ€»ä¸Šä¼ çš„æ–‡ä»¶å¤§å°
  mvc:
    pathmatch:
      matching-strategy: ANT_PATH_MATCHER # è§£å†³ SpringFox ä¸ SpringBoot 2.6.x ä¸å…¼å®¹çš„é—®é¢˜ï¼Œå‚è§ SpringFoxHandlerProviderBeanPostProcessor ç±»
#    throw-exception-if-no-handler-found: true # 404 é”™è¯¯æ—¶æŠ›å‡ºå¼‚å¸¸ï¼Œæ–¹ä¾¿ç»Ÿä¸€å¤„ç†
#    static-path-pattern: /static/** # é™æ€èµ„æºè·¯å¾„; æ³¨æ„ï¼šå¦‚æœä¸é…ç½®ï¼Œåˆ™ throw-exception-if-no-handler-found ä¸ç”Ÿæ•ˆï¼ï¼ï¼ TODO èŠ‹è‰¿ï¼šä¸èƒ½é…ç½®ï¼Œä¼šå¯¼è‡´ swagger ä¸ç”Ÿæ•ˆ

  # Jackson é…ç½®é¡¹
  jackson:
    serialization:
      write-dates-as-timestamps: true # è®¾ç½® Date çš„æ ¼å¼ï¼Œä½¿ç”¨æ—¶é—´æˆ³
      write-date-timestamps-as-nanoseconds: false # è®¾ç½®ä¸ä½¿ç”¨ nanoseconds çš„æ ¼å¼ã€‚ä¾‹å¦‚è¯´ 1611460870.401ï¼Œè€Œæ˜¯ç›´æ¥ 1611460870401
      write-durations-as-timestamps: true # è®¾ç½® Duration çš„æ ¼å¼ï¼Œä½¿ç”¨æ—¶é—´æˆ³
      fail-on-empty-beans: false # å…è®¸åºåˆ—åŒ–æ— å±æ€§çš„ Bean

  # Cache é…ç½®é¡¹
  cache:
    type: REDIS
    redis:
      time-to-live: 1h # è®¾ç½®è¿‡æœŸæ—¶é—´ä¸º 1 å°æ—¶

--- #################### æ¥å£æ–‡æ¡£é…ç½® ####################

springdoc:
  api-docs:
    enabled: true
    path: /v3/api-docs
  swagger-ui:
    enabled: true
    path: /swagger-ui
  default-flat-param-object: true # å‚è§ https://doc.xiaominfo.com/docs/faq/v4/knife4j-parameterobject-flat-param æ–‡æ¡£

knife4j:
  enable: true
  setting:
    language: zh_cn

# å·¥ä½œæµ Flowable é…ç½®
flowable:
  # 1. false: é»˜è®¤å€¼ï¼ŒFlowable å¯åŠ¨æ—¶ï¼Œå¯¹æ¯”æ•°æ®åº“è¡¨ä¸­ä¿å­˜çš„ç‰ˆæœ¬ï¼Œå¦‚æœä¸åŒ¹é…ã€‚å°†æŠ›å‡ºå¼‚å¸¸
  # 2. true: å¯åŠ¨æ—¶ä¼šå¯¹æ•°æ®åº“ä¸­æ‰€æœ‰è¡¨è¿›è¡Œæ›´æ–°æ“ä½œï¼Œå¦‚æœè¡¨å­˜åœ¨ï¼Œä¸åšå¤„ç†ï¼Œåä¹‹ï¼Œè‡ªåŠ¨åˆ›å»ºè¡¨
  # 3. create_drop: å¯åŠ¨æ—¶è‡ªåŠ¨åˆ›å»ºè¡¨ï¼Œå…³é—­æ—¶è‡ªåŠ¨åˆ é™¤è¡¨
  # 4. drop_create: å¯åŠ¨æ—¶ï¼Œåˆ é™¤æ—§è¡¨ï¼Œå†åˆ›å»ºæ–°è¡¨
  database-schema-update: true # è®¾ç½®ä¸º falseï¼Œå¯é€šè¿‡ https://github.com/flowable/flowable-sql åˆå§‹åŒ–
  db-history-used: true # flowable6 é»˜è®¤ true ç”Ÿæˆä¿¡æ¯è¡¨ï¼Œæ— éœ€æ‰‹åŠ¨è®¾ç½®
  check-process-definitions: false # è®¾ç½®ä¸º falseï¼Œç¦ç”¨ /resources/processes è‡ªåŠ¨éƒ¨ç½² BPMN XML æµç¨‹
  history-level: audit # fullï¼šä¿å­˜å†å²æ•°æ®çš„æœ€é«˜çº§åˆ«ï¼Œå¯ä¿å­˜å…¨éƒ¨æµç¨‹ç›¸å…³ç»†èŠ‚ï¼ŒåŒ…æ‹¬æµç¨‹æµè½¬å„èŠ‚ç‚¹å‚æ•°

# MyBatis Plus çš„é…ç½®é¡¹
mybatis-plus:
  configuration:
    map-underscore-to-camel-case: true # è™½ç„¶é»˜è®¤ä¸º true ï¼Œä½†æ˜¯è¿˜æ˜¯æ˜¾ç¤ºå»æŒ‡å®šä¸‹ã€‚
  global-config:
    db-config:
      id-type: NONE # â€œæ™ºèƒ½â€æ¨¡å¼ï¼ŒåŸºäº IdTypeEnvironmentPostProcessor + æ•°æ®æºçš„ç±»å‹ï¼Œè‡ªåŠ¨é€‚é…æˆ AUTOã€INPUT æ¨¡å¼ã€‚
#      id-type: AUTO # è‡ªå¢ IDï¼Œé€‚åˆ MySQL ç­‰ç›´æ¥è‡ªå¢çš„æ•°æ®åº“
#      id-type: INPUT # ç”¨æˆ·è¾“å…¥ IDï¼Œé€‚åˆ Oracleã€PostgreSQLã€Kingbaseã€DB2ã€H2 æ•°æ®åº“
#      id-type: ASSIGN_ID # åˆ†é… IDï¼Œé»˜è®¤ä½¿ç”¨é›ªèŠ±ç®—æ³•ã€‚æ³¨æ„ï¼ŒOracleã€PostgreSQLã€Kingbaseã€DB2ã€H2 æ•°æ®åº“æ—¶ï¼Œéœ€è¦å»é™¤å®ä½“ç±»ä¸Šçš„ @KeySequence æ³¨è§£
      logic-delete-value: 1 # é€»è¾‘å·²åˆ é™¤å€¼(é»˜è®¤ä¸º 1)
      logic-not-delete-value: 0 # é€»è¾‘æœªåˆ é™¤å€¼(é»˜è®¤ä¸º 0)
    banner: false # å…³é—­æ§åˆ¶å°çš„ Banner æ‰“å°
  type-aliases-package: ${yudao.info.base-package}.module.*.dal.dataobject
  encryptor:
    password: XDV71a+xqStEA3WH # åŠ è§£å¯†çš„ç§˜é’¥ï¼Œå¯ä½¿ç”¨ https://www.imaegoo.com/2020/aes-key-generator/ ç½‘ç«™ç”Ÿæˆ

mybatis-plus-join:
  banner: false # æ˜¯å¦æ‰“å° mybatis plus join bannerï¼Œé»˜è®¤true
  sub-table-logic: true # å…¨å±€å¯ç”¨å‰¯è¡¨é€»è¾‘åˆ é™¤ï¼Œé»˜è®¤trueã€‚å…³é—­åå…³è”æŸ¥è¯¢ä¸ä¼šåŠ å‰¯è¡¨é€»è¾‘åˆ é™¤
  ms-cache: true # æ‹¦æˆªå™¨MappedStatementç¼“å­˜ï¼Œé»˜è®¤ true
  table-alias: t # è¡¨åˆ«å(é»˜è®¤ t)
  logic-del-type: on # å‰¯è¡¨é€»è¾‘åˆ é™¤æ¡ä»¶çš„ä½ç½®ï¼Œæ”¯æŒ WHEREã€ONï¼Œé»˜è®¤ ON

# Spring Data Redis é…ç½®
spring:
  data:
    redis:
      repositories:
        enabled: false # é¡¹ç›®æœªä½¿ç”¨åˆ° Spring Data Redis çš„ Repositoryï¼Œæ‰€ä»¥ç›´æ¥ç¦ç”¨ï¼Œä¿è¯å¯åŠ¨é€Ÿåº¦

# VO è½¬æ¢ï¼ˆæ•°æ®ç¿»è¯‘ï¼‰ç›¸å…³
easy-trans:
  is-enable-global: true # å¯ç”¨å…¨å±€ç¿»è¯‘ï¼ˆæ‹¦æˆªæ‰€æœ‰ SpringMVC ResponseBody è¿›è¡Œè‡ªåŠ¨ç¿»è¯‘ )ã€‚å¦‚æœå¯¹äºæ€§èƒ½è¦æ±‚å¾ˆé«˜å¯å…³é—­æ­¤é…ç½®ï¼Œæˆ–é€šè¿‡ @IgnoreTrans å¿½ç•¥æŸä¸ªæ¥å£
  is-enable-cloud: false # ç¦ç”¨ TransType.RPC å¾®æœåŠ¡æ¨¡å¼

--- #################### éªŒè¯ç ç›¸å…³é…ç½® ####################

aj:
  captcha:
    jigsaw: classpath:images/jigsaw # æ»‘åŠ¨éªŒè¯ï¼Œåº•å›¾è·¯å¾„ï¼Œä¸é…ç½®å°†ä½¿ç”¨é»˜è®¤å›¾ç‰‡ï¼›ä»¥ classpath: å¼€å¤´ï¼Œå– resource ç›®å½•ä¸‹è·¯å¾„
    pic-click: classpath:images/pic-click # æ»‘åŠ¨éªŒè¯ï¼Œåº•å›¾è·¯å¾„ï¼Œä¸é…ç½®å°†ä½¿ç”¨é»˜è®¤å›¾ç‰‡ï¼›ä»¥ classpath: å¼€å¤´ï¼Œå– resource ç›®å½•ä¸‹è·¯å¾„
    cache-type: redis # ç¼“å­˜ local/redis...
    cache-number: 1000 # local ç¼“å­˜çš„é˜ˆå€¼,è¾¾åˆ°è¿™ä¸ªå€¼ï¼Œæ¸…é™¤ç¼“å­˜
    timing-clear: 180 # localå®šæ—¶æ¸…é™¤è¿‡æœŸç¼“å­˜(å•ä½ç§’),è®¾ç½®ä¸º0ä»£è¡¨ä¸æ‰§è¡Œ
    type: blockPuzzle # éªŒè¯ç ç±»å‹ defaultä¸¤ç§éƒ½å®ä¾‹åŒ–ã€‚ blockPuzzle æ»‘å—æ‹¼å›¾ clickWord æ–‡å­—ç‚¹é€‰
    water-mark: èŠ‹é“æºç  # å³ä¸‹è§’æ°´å°æ–‡å­—(æˆ‘çš„æ°´å°)ï¼Œå¯ä½¿ç”¨ https://tool.chinaz.com/tools/unicode.aspx ä¸­æ–‡è½¬ Unicodeï¼ŒLinux å¯èƒ½éœ€è¦è½¬ unicode
    interference-options: 0 # æ»‘åŠ¨å¹²æ‰°é¡¹(0/1/2)
    req-frequency-limit-enable: false # æ¥å£è¯·æ±‚æ¬¡æ•°ä¸€åˆ†é’Ÿé™åˆ¶æ˜¯å¦å¼€å¯ true|false
    req-get-lock-limit: 5 # éªŒè¯å¤±è´¥ 5 æ¬¡ï¼Œgetæ¥å£é”å®š
    req-get-lock-seconds: 10 # éªŒè¯å¤±è´¥åï¼Œé”å®šæ—¶é—´é—´éš”
    req-get-minute-limit: 30 # get æ¥å£ä¸€åˆ†é’Ÿå†…è¯·æ±‚æ•°é™åˆ¶
    req-check-minute-limit: 60 # check æ¥å£ä¸€åˆ†é’Ÿå†…è¯·æ±‚æ•°é™åˆ¶
    req-verify-minute-limit: 60 # verify æ¥å£ä¸€åˆ†é’Ÿå†…è¯·æ±‚æ•°é™åˆ¶

--- #################### æ¶ˆæ¯é˜Ÿåˆ—ç›¸å…³ ####################

# rocketmq é…ç½®é¡¹ï¼Œå¯¹åº” RocketMQProperties é…ç½®ç±»
rocketmq:
  # Producer é…ç½®é¡¹
  producer:
    group: ${spring.application.name}_PRODUCER # ç”Ÿäº§è€…åˆ†ç»„

spring:
  # Kafka é…ç½®é¡¹ï¼Œå¯¹åº” KafkaProperties é…ç½®ç±»
  kafka:
    # Kafka Producer é…ç½®é¡¹
    producer:
      acks: 1 # 0-ä¸åº”ç­”ã€‚1-leader åº”ç­”ã€‚all-æ‰€æœ‰ leader å’Œ follower åº”ç­”ã€‚
      retries: 3 # å‘é€å¤±è´¥æ—¶ï¼Œé‡è¯•å‘é€çš„æ¬¡æ•°
      value-serializer: org.springframework.kafka.support.serializer.JsonSerializer # æ¶ˆæ¯çš„ value çš„åºåˆ—åŒ–
    # Kafka Consumer é…ç½®é¡¹
    consumer:
      auto-offset-reset: earliest # è®¾ç½®æ¶ˆè´¹è€…åˆ†ç»„æœ€åˆçš„æ¶ˆè´¹è¿›åº¦ä¸º earliest ã€‚å¯å‚è€ƒåšå®¢ https://blog.csdn.net/lishuangzhe7047/article/details/74530417 ç†è§£
      value-deserializer: org.springframework.kafka.support.serializer.JsonDeserializer
      properties:
        spring.json.trusted.packages: '*'
    # Kafka Consumer Listener ç›‘å¬å™¨é…ç½®
    listener:
      missing-topics-fatal: false # æ¶ˆè´¹ç›‘å¬æ¥å£ç›‘å¬çš„ä¸»é¢˜ä¸å­˜åœ¨æ—¶ï¼Œé»˜è®¤ä¼šæŠ¥é”™ã€‚æ‰€ä»¥é€šè¿‡è®¾ç½®ä¸º false ï¼Œè§£å†³æŠ¥é”™

--- #################### èŠ‹é“ç›¸å…³é…ç½® ####################

yudao:
  info:
    version: 1.0.0
    base-package: cn.iocoder.yudao
  web:
    admin-ui:
      url: http://dashboard.yudao.iocoder.cn # Admin ç®¡ç†åå° UI çš„åœ°å€
  security:
    permit-all_urls:
      - /admin-api/mp/open/** # å¾®ä¿¡å…¬ä¼—å·å¼€æ”¾å¹³å°ï¼Œå¾®ä¿¡å›è°ƒæ¥å£ï¼Œä¸éœ€è¦ç™»å½•
  websocket:
    enable: true # websocketçš„å¼€å…³
    path: /infra/ws/ # è·¯å¾„ // TODO @puhui999: å°ç¨‹åº socket.io è¿æ¥ä¼šå¤šä¸€ä¸ª / ğŸ¤£ğŸ¤£ğŸ¤£
    sender-type: local # æ¶ˆæ¯å‘é€çš„ç±»å‹ï¼Œå¯é€‰å€¼ä¸º localã€redisã€rocketmqã€kafkaã€rabbitmq
    sender-rocketmq:
      topic: ${spring.application.name}-websocket # æ¶ˆæ¯å‘é€çš„ RocketMQ Topic
      consumer-group: ${spring.application.name}-websocket-consumer # æ¶ˆæ¯å‘é€çš„ RocketMQ Consumer Group
    sender-rabbitmq:
      exchange: ${spring.application.name}-websocket-exchange # æ¶ˆæ¯å‘é€çš„ RabbitMQ Exchange
      queue: ${spring.application.name}-websocket-queue # æ¶ˆæ¯å‘é€çš„ RabbitMQ Queue
    sender-kafka:
      topic: ${spring.application.name}-websocket # æ¶ˆæ¯å‘é€çš„ Kafka Topic
      consumer-group: ${spring.application.name}-websocket-consumer # æ¶ˆæ¯å‘é€çš„ Kafka Consumer Group
  swagger:
    title: èŠ‹é“å¿«é€Ÿå¼€å‘å¹³å°
    description: æä¾›ç®¡ç†åå°ã€ç”¨æˆ· App çš„æ‰€æœ‰åŠŸèƒ½
    version: ${yudao.info.version}
    url: ${yudao.web.admin-ui.url}
    email: xingyu4j@vip.qq.com
    license: MIT
    license-url: https://gitee.com/zhijiantianya/ruoyi-vue-pro/blob/master/LICENSE
  captcha:
    enable: true # éªŒè¯ç çš„å¼€å…³ï¼Œé»˜è®¤ä¸º true
  wxa-code:
    env-version: release # å°ç¨‹åºç‰ˆæœ¬: æ­£å¼ç‰ˆä¸º "release"ï¼›ä½“éªŒç‰ˆä¸º "trial"ï¼›å¼€å‘ç‰ˆä¸º "develop"ã€‚é»˜è®¤ä¸º release
  codegen:
    base-package: ${yudao.info.base-package}
    db-schemas: ${spring.datasource.dynamic.datasource.master.name}
    front-type: 10 # å‰ç«¯æ¨¡ç‰ˆçš„ç±»å‹ï¼Œå‚è§ CodegenFrontTypeEnum æšä¸¾ç±»
  tenant: # å¤šç§Ÿæˆ·ç›¸å…³é…ç½®é¡¹
    enable: true
    ignore-urls:
      - /admin-api/system/tenant/get-id-by-name # åŸºäºåå­—è·å–ç§Ÿæˆ·ï¼Œä¸è®¸å¸¦ç§Ÿæˆ·ç¼–å·
      - /admin-api/system/tenant/get-by-website # åŸºäºåŸŸåè·å–ç§Ÿæˆ·ï¼Œä¸è®¸å¸¦ç§Ÿæˆ·ç¼–å·
      - /admin-api/system/captcha/get # è·å–å›¾ç‰‡éªŒè¯ç ï¼Œå’Œç§Ÿæˆ·æ— å…³
      - /admin-api/system/captcha/check # æ ¡éªŒå›¾ç‰‡éªŒè¯ç ï¼Œå’Œç§Ÿæˆ·æ— å…³
      - /admin-api/infra/file/*/get/** # è·å–å›¾ç‰‡ï¼Œå’Œç§Ÿæˆ·æ— å…³
      - /admin-api/system/sms/callback/* # çŸ­ä¿¡å›è°ƒæ¥å£ï¼Œæ— æ³•å¸¦ä¸Šç§Ÿæˆ·ç¼–å·
      - /admin-api/pay/notify/** # æ”¯ä»˜å›è°ƒé€šçŸ¥ï¼Œä¸æºå¸¦ç§Ÿæˆ·ç¼–å·
      - /jmreport/* # ç§¯æœ¨æŠ¥è¡¨ï¼Œæ— æ³•æºå¸¦ç§Ÿæˆ·ç¼–å·
      - /admin-api/mp/open/** # å¾®ä¿¡å…¬ä¼—å·å¼€æ”¾å¹³å°ï¼Œå¾®ä¿¡å›è°ƒæ¥å£ï¼Œæ— æ³•æºå¸¦ç§Ÿæˆ·ç¼–å·
    ignore-tables:
      - system_tenant
      - system_tenant_package
      - system_dict_data
      - system_dict_type
      - system_error_code
      - system_menu
      - system_sms_channel
      - system_sms_template
      - system_sms_log
      - system_sensitive_word
      - system_oauth2_client
      - system_mail_account
      - system_mail_template
      - system_mail_log
      - system_notify_template
      - infra_codegen_column
      - infra_codegen_table
      - infra_config
      - infra_file_config
      - infra_file
      - infra_file_content
      - infra_job
      - infra_job_log
      - infra_job_log
      - infra_data_source_config
      - jimu_dict
      - jimu_dict_item
      - jimu_report
      - jimu_report_data_source
      - jimu_report_db
      - jimu_report_db_field
      - jimu_report_db_param
      - jimu_report_link
      - jimu_report_map
      - jimu_report_share
      - rep_demo_dxtj
      - rep_demo_employee
      - rep_demo_gongsi
      - rep_demo_jianpiao
      - tmp_report_data_1
      - tmp_report_data_income
  sms-code: # çŸ­ä¿¡éªŒè¯ç ç›¸å…³çš„é…ç½®é¡¹
    expire-times: 10m
    send-frequency: 1m
    send-maximum-quantity-per-day: 10
    begin-code: 9999 # è¿™é‡Œé…ç½® 9999 çš„åŸå› æ˜¯ï¼Œæµ‹è¯•æ–¹ä¾¿ã€‚
    end-code: 9999 # è¿™é‡Œé…ç½® 9999 çš„åŸå› æ˜¯ï¼Œæµ‹è¯•æ–¹ä¾¿ã€‚
  trade:
    order:
      app-id: 1 # å•†æˆ·ç¼–å·
      pay-expire-time: 2h # æ”¯ä»˜çš„è¿‡æœŸæ—¶é—´
      receive-expire-time: 14d # æ”¶è´§çš„è¿‡æœŸæ—¶é—´
      comment-expire-time: 7d # è¯„è®ºçš„è¿‡æœŸæ—¶é—´
    express:
      client: kd_niao
      kd-niao:
        api-key: cb022f1e-48f1-4c4a-a723-9001ac9676b8
        business-id: 1809751
      kd100:
        key: pLXUGAwK5305
        customer: E77DF18BE109F454A5CD319E44BF5177

debug: false

# ç§¯æœ¨æŠ¥è¡¨é…ç½®
jeecg:
  jmreport:
    saas-mode: tenant